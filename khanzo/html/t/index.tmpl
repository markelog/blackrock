<!DOCTYPE html>
<html>
  <head>
    <title>
      blackrock
    </title>
    <style>
      @font-face {
      font-family: blackrock;
      src: url('/public/html/font/hack.woff') format('woff'),
           url('/public/html/font/hack.woff2') format('woff2');
      }

      body {
      margin: 5px;
      font-family: "blackrock", monospace;
      background-color: white;
      color: #3f3f3f;
      max-width: 60rem;
      padding: 1rem;
      font-size: 14px;
      margin: auto;
      }
      .trigger input[type=checkbox] + span {
      visibility: hidden;
      display: none;
      opacity: 0;
      }
      .trigger input[type=checkbox]:checked + span {
      visibility: visible;
      display: block;
      opacity: 1;
      transition-delay: 0s;
      }

      .msg {
      display: block;
      }

      pre {
      font-family: "blackrock", Monaco, monospace;
      }
      a {
      color: #000;
      text-decoration: none;
      }
      .hit-sep {
      background-color: gray;
      }
      .left {
      width: 30%;
      word-break: break-word
      }
      .right {
      width: 30%;
      word-break: break-word
      }
      table {
      width: 100%;
      }
      .banner {
      background-color: gray;
      color: white;
      }
    </style>
  </head>
  <body>
    {{ $base := .BaseUrl }}
    {{ $query := .QueryString }}
    <div style="line-height: 25px;">
      <a href="{{ replace $base "/html/" "/text/" }}">text</a>
      <br>
      <a href="/scan/html/?{{$query}}">/scan/html/</a><br>
      {{ range .Crumbs }}
      <a href="{{ .Base }}/{{.Exact}}?{{$query}}">{{.Exact}}</a> <a href="/scan/html/{{.Exact}}?{{$query}}">=</a> <a href="{{ removeQuery .Base .Exact}}?{{$query}}">-</a>
      <br>
      {{ end }}
      <form method=get action='?'>
        <input type=hidden name='query_max_documents' value='{{getS $query "query_max_documents"}}'>
        <input name="from" type=date value='{{getS $query "from"}}'>
        <input name="to" type=date value='{{getS $query "to"}}'>
        <input type=submit value=filter>
      </form>
    </div>
    {{ $total := .Stats.TotalCount }}

    <table border=0>
      <tr><td colspan=2><pre class="banner">{{ banner "basic"}}</pre></td></tr>
      {{ range pick .Stats.Search "env" "product" "year-month" }}
      {{ template "/html/t/chart.tmpl" dict "Data" . "GlobalTotal" $total "BaseUrl" $base "Link" true "QueryString" $query}}
      {{ end }}

      <tr><td colspan=2><pre class="banner">{{ banner "foreign id"}}</pre></td></tr>
      {{ range .Stats.Foreign }}
      {{ template "/html/t/chart.tmpl" dict "Data" . "GlobalTotal" $total "BaseUrl" $base "Link" true "QueryString" $query}}
      {{ end }}
      <tr><td colspan=2><pre class="banner">{{ banner "event type"}}</pre></td></tr>
      {{ template "/html/t/chart.tmpl" dict "Data" .Stats.EventTypes "GlobalTotal" $total  "BaseUrl" $base "Link" true "QueryString" $query}}
      <tr><td colspan=2><pre class="banner">{{ banner "search"}}</pre></td></tr>
      {{ range .Stats.Search }}
      {{ template "/html/t/chart.tmpl" dict "Data" . "GlobalTotal" $total  "BaseUrl" $base "Link" true "QueryString" $query}}
      {{ end }}
      <tr><td colspan=2><pre class="banner">{{ banner "count"}}</pre></td></tr>
      {{ range .Stats.Count }}
      {{ template "/html/t/chart.tmpl" dict "Data" . "GlobalTotal" $total  "BaseUrl" $base "Link" false "QueryString" $query}}
      {{ end }}
      <tr><td colspan=2><pre id="sample" class="banner">{{ banner "sample"}}</pre></td></tr>
      {{ range .Stats.Sample }}
      {{ template "/html/t/hit.tmpl" dict "Data" . "QueryString" $query "BaseUrl" $base }}
      {{ end  }}
    </table>
  </body>
</html>